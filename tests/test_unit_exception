"""
FindMyOrder Unit Testing
"""

import pytest

from findmyorder import FindMyOrder
from findmyorder.config import settings


@pytest.fixture(scope="session", autouse=True)
def set_test_settings():
    settings.configure(FORCE_ENV_FOR_DYNACONF="fmo")


@pytest.fixture(name="fmo")
def fmo():
    """return fmo"""
    return FindMyOrder()


async def test_create_client_exception(fmo, caplog):
    result = fmo.create_client(parser_library="none")
    assert result is not None
    assert "No Client were created" in caplog.text
